:root {
  /* Default Theme: Purple */
  --accent-rgb: 138, 43, 226; 
  --bg-start: #4c1d95;
  --bg-end: #312e81;
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
}

/* Theme Variations */
.theme-cyan { --accent-rgb: 6, 182, 212; --bg-start: #0891b2; --bg-end: #1e3a8a; }
.theme-blue { --accent-rgb: 59, 130, 246; --bg-start: #1d4ed8; --bg-end: #1e3a8a; }
.theme-green { --accent-rgb: 16, 185, 129; --bg-start: #047857; --bg-end: #064e3b; }
.theme-red { --accent-rgb: 239, 68, 68; --bg-start: #991b1b; --bg-end: #7f1d1d; }
.theme-gold { --accent-rgb: 245, 158, 11; --bg-start: #b45309; --bg-end: #78350f; }
.theme-yellow { --accent-rgb: 253, 224, 71; --bg-start: #a16207; --bg-end: #422006; }

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  cursor: none; /* Replaced by custom particle cursor if not mobile */
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
  background-color: #0f172a;
}

/* Animated Gradient Background */
#bg-gradient {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
  background-size: 200% 200%;
  animation: gradientShift 15s ease infinite;
  z-index: -2;
  transition: background 0.8s ease;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Glassmorphism System */
.glass {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid rgba(var(--accent-rgb), 0.35);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}

.glass:hover {
  border-color: rgba(var(--accent-rgb), 0.6);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3), 0 0 15px rgba(var(--accent-rgb), 0.2);
}

/* Typography & Accent Colors */
.rgb-text {
  background: linear-gradient(to right, rgb(var(--accent-rgb)), #fff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 3rem;
  font-weight: 800;
}

.cursor { color: rgb(var(--accent-rgb)); animation: blink 1s step-end infinite; }
@keyframes blink { 50% { opacity: 0; } }

/* Layout & Sections */
main { max-width: 1100px; margin: 0 auto; padding: 100px 20px 40px; }
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1rem; }
.card { padding: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; }
.card img { width: 100%; border-radius: 8px; object-fit: cover; }
.badge { font-size: 0.75rem; padding: 2px 8px; border-radius: 12px; background: rgba(var(--accent-rgb), 0.3); }

/* Navigation & Theme Switcher */
.nav-bar { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 10px 20px; display: flex; gap: 20px; z-index: 100; align-items: center; }
.theme-switcher button { width: 20px; height: 20px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.2); cursor: pointer; transition: transform 0.2s; }
.theme-switcher button:hover { transform: scale(1.2); }

/* Buttons */
.glass-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; text-decoration: none; display: inline-block; }
.glass-btn:hover { background: rgba(var(--accent-rgb), 0.4); }

/* TI-83 Overlay */
#ti83-grid { display: none; position: fixed; inset: 0; background-image: linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px); background-size: 20px 20px; z-index: -1; pointer-events: none; }
.ti83-active #ti83-grid { display: block; }
.ti83-active { filter: sepia(1) hue-rotate(60deg) saturate(2); }

#ti83-calc { position: fixed; bottom: 20px; right: 20px; width: 250px; padding: 15px; background: rgba(10, 20, 10, 0.85); border-color: #0f0; z-index: 200; font-family: monospace; }
.calc-screen { background: #8ba888; color: #111; padding: 10px; margin-bottom: 10px; border-radius: 4px; border: inset 2px #555; }
#calc-input { width: 100%; padding: 5px; background: #222; color: #0f0; border: 1px solid #0f0; margin-bottom: 10px; font-family: monospace; }

/* Desktop Particle Canvas */
#particle-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 9999; }

/* Modals */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.hidden { display: none !important; }

/* Mobile Optimizations */
@media (hover: none) and (pointer: coarse) {
  * { cursor: auto; }
  #particle-canvas { display: none; }
  #bg-gradient { animation: none; } /* Save battery */
  .glass { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
  .tilt-card { transform: none !important; }
}
